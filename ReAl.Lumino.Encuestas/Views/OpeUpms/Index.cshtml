@using System.Collections
@model IEnumerable<ReAl.Lumino.Encuestas.Models.OpeUpms>

@section Styles
{
	<!-- Bootstrap-Table CSS -->
	<link href="~/lib/bootstrap-table/dist/bootstrap-table.min.css" rel="stylesheet">
	<!-- Sweetalert CSS -->
	<link href="~/lib/sweetalert2/dist/sweetalert2.min.css" rel="stylesheet">
}	

@{
    ViewData["Title"] = "Index";
}

<div class="row">
	<div class="col-lg-12">
		<h1 class="page-header">OpeUpms</h1>
	</div>
</div><!--/.row-->


<div class="row">
<div class="col-lg-12">
<div class="panel panel-default">
<div class="panel-heading">Index</div>
<div class="panel-body">
	<a asp-action="Create" title="Nuevo" class="btn btn-primary">
		<i class="fa fa-file-o"></i>
	</a>
	<div class="row">
		<div class="form-group">
			<div class="col-md-10">
				@Html.DropDownList("ddlDepto",  new SelectList((IEnumerable) ViewData["Idcde"], "Idcde", "Nombre"))
			</div>
		</div>
	</div>	
	<div id = "partialDiv" >  
		@Html.Partial("_IndexPartial") 
	</div>
</div>
</div>
</div>
</div><!-- /.row -->

@section Scripts
{
	<!-- Bootstrap-Table -->
	<script src="~/lib/bootstrap-table/dist/bootstrap-table.min.js"></script>
	<script src="~/lib/bootstrap-table/dist/extensions/toolbar/bootstrap-table-toolbar.min.js"></script>
	<script src="~/lib/bootstrap-table/dist/locale/bootstrap-table-es-AR.min.js"></script>
	<!-- Sweetalert JavaScript -->
	<script src="~/lib/sweetalert2/dist/sweetalert2.min.js"></script>
	
	<script>
	    $(document).ready(function(){
	        $('[data-toggle="popover"]').popover();
	    });
	    
	    $(document).on('show.bs.popover',
	        function(e) {
	            if ($(e.target).data('trigger') == 'click') {
	                var timeoutDataName = 'shownBsTooltipTimeout';
	                if ($(e.target).data(timeoutDataName) != null) {
	                    clearTimeout($(e.target).data(timeoutDataName));
	                }
	                var timeout = setTimeout(function() {
	                        $(e.target).click();
	                    },
	                    3000);
	                $(e.target).data(timeoutDataName, timeout);
	            }
	        });
	    $(document).on('hide.bs.popover',
	        function(e) {
	            if ($(e.target).data('trigger') == 'click') {
	                var timeoutDataName = 'shownBsTooltipTimeout';
	                if ($(e.target).data(timeoutDataName) != null) {
	                    clearTimeout($(e.target).data(timeoutDataName));
	                }
	            }
	        });
	</script>
	
	<script>
		$(document).ready(function()  
		{  
			$("#ddlDepto").on("change", function() {
				$.ajax(  
					{  
						url: '/OpeUpms/GetUpms?idcde=' + $(this).attr("value"),  
						type: 'GET',  
						data: "",  
						contentType: 'application/json; charset=utf-8',  
						success: function(data)  
						{  
							$("#partialDiv").html(data);  
						},  
						error: function()  
						{  
							alert("error");  
						}  
					});  
			});  
		});
	</script>
}	


